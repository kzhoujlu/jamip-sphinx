<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.4.2 StructureFactory类 &mdash; JAMIP 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f2a433a1"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            JAMIP
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">3.4.2 StructureFactory类</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">JAMIP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">3.4.2 StructureFactory类</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/zh_part_4_1.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="structurefactory">
<h1>3.4.2 StructureFactory类<a class="headerlink" href="#structurefactory" title="Link to this heading"></a></h1>
<p>结构工厂类中集成了大量常用的结构操作方法，通过对这些操作方法的进一步组合，可以实现复杂结构的构建。此外，这些方法中大部分都支持链式操作。以下对类中的方法进行简单介绍：</p>
<p><strong>注意：</strong> 结构操作方法返回值均为类自身，需要调用其类属性structure获取结构操作后的结构对象。</p>
<p><strong>建议：</strong> 在结构操作过程中，设置isUpdatedInfo和isPersist为False，可以提高程序的响应速度，并且可以避免将操作过程中产生的无用结构保存进数据库；在完成所有结构操作后，调用操作后得到的结构对象的update()方法，同步内存中内建数据结构中的数据，可以避免后续抛出一些异常情况。</p>
<p><strong>参数格式：</strong> 结构操作方法的特定输入变量需要满足一定格式，在此进行约定：</p>
<ul class="simple">
<li><p><strong>原子的标准格式化数组</strong>，其格式为：[元素名，坐标，坐标类型]，例如：
[’Na’, 0.1, 0.0, 0.0, ‘Direct’]
[’Na’, 5.234, 0.0, 0.0, ‘Cartesian’]
[’Na’, 0.1, 0.0, 0.0] (当坐标类型缺省时，默认坐标类型为分数坐标)
其中元素名可用物种信息替代，例如：
[’Na1+’, 0.1, 0.0, 0.0, ‘Direct’]
[’Na1+’, 5.234, 0.0, 0.0, ‘Cartesian’]</p></li>
<li><p><strong>原子坐标或参考点坐标</strong>，其格式为：[坐标，坐标类型]，例如：
[0.1, 0.0, 0.0, ‘direct’]
[5.234, 0.0, 0.0, ‘Cartesian’]
[0.1, 0.0, 0.0] (当坐标类型缺省时，默认坐标类型为分数坐标)</p></li>
<li><p><strong>方向向量或旋转轴向量</strong>，其格式为[向量，向量类型]，例如：
[1, 0, 0, ‘direct’]
[2.6, 2.6, 0, ‘Cartesian’]
[1, 0, 0] (当坐标类型缺省时，默认坐标类型为分数坐标)</p></li>
<li><p><strong>旋转角</strong>，其格式为[角度，角度类型]，例如：
[30, ‘Degree’]
[0.2, ‘Radian’]</p></li>
</ul>
<p><em><strong>structure</strong></em>
类属性，获取结构类的当前结构对象</p>
<p><em><strong>raw_structure</strong></em>
类属性，获取结构类的初始结构对象</p>
<p><em><strong>zoom(scale, isPersist=False)</strong></em>
晶格基矢缩放。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scale:</span> <span class="pre">float</span></code> 放缩系数值</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
</ul>
<p><em><strong>scale(direction, isPersist=False)</strong></em>
对指定晶格基矢方向，进行晶胞的放缩。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">direction:</span> <span class="pre">list</span></code> 指定需要缩放的晶格基矢方向的系数
其数据格式为：[ <em>scale of a, scale of b, scale of c</em> ]，如：
[0.9, 1, 1] (只压缩a方向0.9)
[0.9, 0.9, 1] (压缩a和b方向0.9)
[0.9, 0.9, 0.9] (三个方向都压缩0.9，等同于调用zoom(0.9))</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
</ul>
<p><em><strong>add_atoms(atoms, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
在结构中增添多个原子。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atoms:</span> <span class="pre">array-like</span></code> 包含原子信息的列表数组，数组的每个原子可以为以下形式：
a. 原子的实例化对象，如：[ <em>atom0, atom1, atom2</em> ];
b. 原子的标准格式化数组，如：[[元素名，坐标，坐标类型], … ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isNormalizingCoordinate:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">True</span></code>是否规范化原子的坐标，移除周期性，
保证原子位于晶胞基矢表示的晶胞内部，如：分数坐标1.3将转化为0.3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">precision:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-3</span></code>检查过程中判定原子是否重叠的精度参数，单位为埃（Å）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>del_atoms(atoms, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
在结构中删除多个原子。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atoms:</span> <span class="pre">array-like</span></code> 包含原子信息的列表数组，数组的每个原子可以为以下形式：
a. 原子的实例化对象，如：[ <em>atom0, atom1, atom2</em> ];
b. 原子的标准格式化数组，如：[[元素名，坐标，坐标类型], … ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>substitute_atoms(atoms, symbol_of_elements, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
替换结构中的多个原子的元素类型。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atoms:</span> <span class="pre">array-like</span></code> 包含原子信息的列表数组，数组的每个原子可以为以下形式：
a. 原子的实例化对象，如：[ <em>atom0, atom1, atom2</em> ];
b. 原子的标准格式化数组，如：[[元素名，坐标，坐标类型], … ]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symbol_of_elements:</span> <span class="pre">string</span> <span class="pre">or</span> <span class="pre">list</span></code> 替换成的新元素名。如果全部需要替换的原子都换成同一种元素，可以仅指定一个元素类型。如：’Na’。否则，需要给出每个原子对应的新的元素名的列表数组，如：[ <em>‘Na’, ‘Na’, ‘Na’</em> ]。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>center(direction, dtype_of_move=’position’, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
按照给定的方向，移动结构中的原子，实现中心对齐。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">direction</span></code> 原子移动的方向向量，格式为：[ <em>a, b, c</em> ]，
如：<code class="docutils literal notranslate"><span class="pre">[1,0,0]</span></code> (沿a方向)、<code class="docutils literal notranslate"><span class="pre">[0,1,0]</span></code>(沿b方向)、<code class="docutils literal notranslate"><span class="pre">[0,0,1]</span></code>(沿c方向)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type_of_move:</span> <span class="pre">{'position','mass'},</span> <span class="pre">default:</span> <span class="pre">'position'</span></code> 指定对齐方式。
其中，’mass’为按质心对齐，’position’为以左右边界位置对齐</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>vacuum(direction, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
在指定方向增加真空层。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">direction:</span> <span class="pre">list</span></code>为沿着某个晶格矢量方向增加真空层的方向向量</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isCenter:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">True</span></code> 是否中心对齐结构</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distance:</span> <span class="pre">float,</span> <span class="pre">optional</span></code> 将结构中的所以原子沿着给定的方向移动指定的距离，单位为埃(Å)。
注意：移动距离不能超过添加真空层之后的晶胞参数的长度，即不能将原子移动到晶胞之外</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>redefine(operator_matrix, isPersist=False)</strong></em>
利用给出的操作矩阵M，重新定义晶格，其转换关系为：<code class="docutils literal notranslate"><span class="pre">C'=C</span> <span class="pre">x</span> <span class="pre">M</span></code>。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">operator_matrix:</span> <span class="pre">int</span> <span class="pre">array-like</span> <span class="pre">of</span> <span class="pre">shape</span> <span class="pre">(3,</span> <span class="pre">3)</span></code> 3x3的整数矩阵(M)，例如：<code class="docutils literal notranslate"><span class="pre">[[0,1,1],</span> <span class="pre">[1,0,1],</span> <span class="pre">[1,1,0]]</span></code>
注意：晶胞体积要大于0，即M的行列式绝对值为正整数。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
</ul>
<p><em><strong>surface(hkl, maxindex=None, saxis=’c’, isPersist=False, **kwargs)</strong></em>
生成指定晶面的结构。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hkl:</span> <span class="pre">array-like</span></code> 晶面的Miller指数，格式为[h, k, l]，如[1, 1, 0] （均为整数）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxindex:</span> <span class="pre">int</span></code> 搜索的晶格矢量的范围，默认值为hkl的最大值。低对称性结构在搜索正交晶矢时可能失败，需要用户手动修改maxindex。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">saixs:</span> <span class="pre">str,</span> <span class="pre">defaule:</span> <span class="pre">'c'</span></code> 生成晶面在结构中对应的晶轴</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
</ul>
<p><em><strong>standardize(isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
将当前结构转化为标准化结构。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hall_number:</span> <span class="pre">int,</span> <span class="pre">default:</span> <span class="pre">0</span></code> 霍尔符号。注意，如果该值为0，默认选取Seto网站列出的所有可选空间群列表中的最小序数对应的空间群结构。</p></li>
</ul>
<p><em><strong>primitive(symprec=default_constants.symprec.value, isPersist=False)</strong></em>
获取原胞结构。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
</ul>
<p><em><strong>conventional(symprec=default_constants.symprec.value, isPersist=False)</strong></em>
获取单胞结构。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
</ul>
<p><em><strong>supercell(dim, isPersist=False, **kwargs)</strong></em>
获取超胞结构。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dim:</span> <span class="pre">list</span></code> 需要扩胞的大小，格式为[ <em>a, b, c</em> ]，如：[2, 2, 2]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>joint(jointed_structure, direction, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
在给定的方向上，拼接两个晶体结构。注意：拼接时，传入的jointed_structure结构，会对垂直拼接方向的横截面进行缩放，以使两个结构的横截面匹配。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">jointed_structure</span></code>拼接结构实例化对象。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direction:</span> <span class="pre">list</span></code> 指定拼接的方向向量，格式为[方向向量，方向向量类型] (注意：只能为’Direct’)，例如：
[ 1, 0, 0, ‘Direct’] (拼接到a轴右侧)
[-1, 0, 0, ‘Direct’] (拼接到a轴左侧)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>rotation(atoms, axis, theta, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
对选定的原子进行旋转操作。注意，如果不设置旋转的原点位置，默认的原点设置为坐标系的原点[0, 0, 0]。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atoms:</span> <span class="pre">array-like</span></code> 需要旋转的原子的列表数组，数组的每个原子可以为以下形式：
a. 原子的实例化对象，如：[ <em>atom0, atom1, atom2</em> ];
b. 原子的标准格式化数组，其格式为：[元素名，坐标，坐标类型];</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">axis:</span> <span class="pre">list</span></code> 旋转轴向量，格式为[向量，向量类型]。注：分子的旋转轴格式仅支持笛卡尔坐标。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theta:</span> <span class="pre">list</span></code> 旋转角度，格式为[角度，角度类型]，如：<code class="docutils literal notranslate"><span class="pre">[30,</span> <span class="pre">'Degree']</span></code>，<code class="docutils literal notranslate"><span class="pre">[0.2,</span> <span class="pre">'Radian']</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">origin:</span> <span class="pre">list,</span> <span class="pre">optional</span></code> 旋转矢量的原点 (注意，它是旋转轴的原点，而不是轴上的一个点), 格式为[坐标，坐标类型]，例如：
[0.1, 0.0, 0.0, ‘Direct’]
[0.1, 0.0, 0.0]
[5.234, 0.0, 0.0, ‘Cartesian’]</p></li>
</ul>
<p><em><strong>translation(atoms, direction, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
对选定的原子进行平移操作。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atoms:</span> <span class="pre">array-like</span></code> 需要平移的原子的列表数组，数组的每个原子可以为以下形式：
a. 原子的实例化对象，如：[ <em>atom0, atom1, atom2</em> ];
b. 原子的标准格式化数组，其格式为：[元素名，坐标，坐标类型];</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direction:</span> <span class="pre">list</span></code>：平移方向向量，格式为[坐标，坐标类型]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>perturb(cutoff=0.1, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
对结构中的原子进行随机扰动。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cutoff:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">0.1</span></code> 扰动的截断距离，单位为埃(Å)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p><em><strong>constraint(self, atoms, isPersist=False, isConstraint_of_remainder=True, **kwargs)</strong></em>
对结构中的选择的原子进行固定(对应POSCAR的<code class="docutils literal notranslate"><span class="pre">selected</span> <span class="pre">dynamics</span></code>标签)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">atoms:</span> <span class="pre">array-like</span></code> 需要更新固定的原子的列表数组，数组的每个原子可以为以下形式：
a. 原子的实例化对象，如：[ <em>atom0, atom1, atom2</em> ];
b. 原子的标准格式化数组，其格式为：[元素名，坐标，坐标类型];
c. 包含固定信息的原子的格式化数组，其格式为：[元素名，坐标，坐标类型，固定信息];
（注意：如果使用这里的信息，则不需要传入<code class="docutils literal notranslate"><span class="pre">constraints</span></code>参数）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constraints:</span> <span class="pre">array-like</span></code> 原子固定信息，可以设置为以下形式：
a. 单个bool值，如<code class="docutils literal notranslate"><span class="pre">True/False</span></code>，为所有输入原子设置相同的固定信息
b. bool列表，长度与原子列表相同，为每个输入原子独立设置固定信息
例如<code class="docutils literal notranslate"><span class="pre">[True,True,False,...]</span></code>（三方向固定信息相同）；
或<code class="docutils literal notranslate"><span class="pre">[[True,True,False],</span> <span class="pre">[True,True,False],</span> <span class="pre">...]</span></code>（三方向固定信息不同）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isConstraint_of_remainder:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">True</span></code> 是否更新未指定部分的原子固定信息</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constraint_of_remainder:</span> <span class="pre">bool/list,</span> <span class="pre">default:</span> <span class="pre">True</span></code> 用于指定未指定部分的原子固定信息</p></li>
</ul>
<p><em><strong>getUnit(unit, tolerance=0.1, **kwargs)</strong></em>
获取指定区域的格式化原子信息。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unit</span></code> 指定结构区域，其格式有两种：
a. 沿着晶胞基矢的选取一定范围，格式为[起点，终点，方向(0/1/2)]，其中0/1/2 分别代表x,y,z三个方向，
如：[0.234, 0.324, 2]
b. 通过分别指定三个晶胞基矢方向的起始点，选中晶胞中的一个区域，其格式为3x2的数组，格式与示例如下：
# 格式  [[x0, x1], [y0, y1], [z0, z1]]<br /># 示例  [[0.1, 0.2], [0.1, 0.2], [0.1, 0.2]]
注意：只支持晶体结构对象，不可用于分子结构对象。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">0.1</span></code> 选取范围右侧边界处原子坐标的容差，其目的是选取原子在选取范围以外但是非常靠近右侧的原子（在一些情况下，原子存在微小扰动而偏离高对称位置，确保程序可以正确选中给定区域内的原子，避免调用该方法的其他结构操作方法，出现漏选或原子重叠现象的发生），单位为埃(Å)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symbol_of_atoms:</span> <span class="pre">list,</span> <span class="pre">optional</span></code> 只选择在给定区域内的指定元素类型，其值为元素符号的列表数组，如[ ‘Na’, ‘Cl’ ]</p></li>
</ul>
<p><em><strong>removeUnit(unit, tolerance=0.1, isMoveAtoms=True, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
删除指定区域的原子。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unit</span></code> 指定的范围，格式为[起点，终点，方向(0/1/2)]，如：[0.234, 0.324, 2]
注意：只支持晶体结构对象，不可用于分子结构对象。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">0.1</span></code> 选取范围右侧边界处原子坐标的容差，其目的是选取原子在选取范围以外但是非常靠近右侧的原子（在一些情况下，原子存在微小扰动而偏离高对称位置，确保程序可以正确选中给定区域内的原子，避免调用该方法的其他结构操作方法，出现漏选或原子重叠现象的发生），单位为埃(Å)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isMoveAtoms:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">True</span></code> 删除指定区域的原子后，是否移动删除区域右侧的原子，填充移除单元之后的空位</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersistLattice:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">True</span></code>：是否在删除结构单原之后保持原有结构的晶胞参数。如果设为False，在删除结构单元后，晶胞基矢会沿着删除方向收缩相同长度的值</p></li>
</ul>
<p><em><strong>addUnit(unit, nrepeat, tolerance=0.1, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
沿指定方向重复该区域内的结构单元。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">unit</span></code> 指定的范围，格式为[起点，终点，方向(0/1/2)]，如：[0.234, 0.324, 2]
注意：只支持晶体结构对象，不可用于分子结构对象。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nrepeat:</span> <span class="pre">int</span></code> 复制结构单元的次数。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">0.1</span></code> 选取范围右侧边界处原子坐标的容差，其目的是选取原子在选取范围以外但是非常靠近右侧的原子（在一些情况下，原子存在微小扰动而偏离高对称位置，确保程序可以正确选中给定区域内的原子，避免调用该方法的其他结构操作方法，出现漏选或原子重叠现象的发生），单位为埃(Å)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersistLattice:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">True</span></code>：是否在删除结构单原之后保持原有结构的晶胞参数。如果设为False，在删除结构单元后，晶胞基矢会沿着删除方向收缩相同长度的值</p></li>
</ul>
<p><em><strong>insertMolecule(structure_of_molecule, position_in_molecule, position, isUpdatedInfo=False, isPersist=False, **kwargs)</strong></em>
在晶体结构中插入分子。分别选取分子和晶体坐标系中一个参考点，计算两个参考点的距离差作为平移的矢量，实现在晶体中插入分子结构。
注意：只支持晶体结构对象，不可用于分子结构对象。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">structure_of_molecule</span></code> 分子的实例化对象</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position_in_molecule</span></code> 分子结构中的参考点，其格式为[坐标, ‘Cartesian’]，如:
[5.234, 0, 0, ‘Cartesian’]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position</span></code> 晶体结构中的参考点，其格式为[坐标，坐标类型]。例如：
[0.1, 0, 0, ‘Direct’]
[0.1, 0, 0]
[5.234, 0.0, 0.0, ‘Cartesian’]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isUpdatedInfo:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">False</span></code>是否同步结构操作引起结构中其他关联信息的变化，如元素、化学式等</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPersist:</span> <span class="pre">bool,</span> <span class="pre">default:</span> <span class="pre">Fasle</span></code> 是否保存结构到数据库中</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">symprec:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">1e-5</span></code> 寻找结构对称性时原子位置的误差精度</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">angle_tolerance:</span> <span class="pre">float,</span> <span class="pre">default:</span> <span class="pre">-1.0</span></code> 寻找结构对称性时基矢间角度的误差精度</p></li>
</ul>
<p>下面以构造二维四方相钙钛矿为例，演示结构操作函数的使用。</p>
<p><img alt="sf" src="https://note.youdao.com/yws/api/personal/file/6C2876023B974361B114B9E9425DFAB7?method=download&amp;shareKey=5fd7ed3d8dd8abaa014339078f733e5f" /></p>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Kun Zhou.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>